(this["webpackJsonpreddit-scraper"]=this["webpackJsonpreddit-scraper"]||[]).push([[0],[,,,function(t,e,r){t.exports={searchbar__label:"SearchBar_searchbar__label__1aEKd",searchbar__input:"SearchBar_searchbar__input__1UQUp","searchbar__input--box":"SearchBar_searchbar__input--box__ffnvL",invalid:"SearchBar_invalid__202AO","searchbar__input--error":"SearchBar_searchbar__input--error__3fk3J",searchbar__btn:"SearchBar_searchbar__btn__9s5ct"}},function(t,e,r){t.exports={navbar:"Navbar_navbar__31-FB",navbar__title:"Navbar_navbar__title__3-7CC","navbar__logo-container":"Navbar_navbar__logo-container__3oNuj",navbar__logo:"Navbar_navbar__logo__2ou9Y"}},function(t,e,r){t.exports={"popular-search-list":"PopularSearchList_popular-search-list__1c3Fc","popular-search-list__heading":"PopularSearchList_popular-search-list__heading__35FaZ","popular-search-list__subreddit":"PopularSearchList_popular-search-list__subreddit__1gELa","popular-search-list__no-data":"PopularSearchList_popular-search-list__no-data__y0bIb"}},,,function(t,e,r){t.exports={btn:"Button_btn__Liofu"}},function(t,e,r){t.exports={"grid-square":"GridSquare_grid-square__cQ_Rq","color-0":"GridSquare_color-0__1H8ex","color-1":"GridSquare_color-1__2AOH0","color-2":"GridSquare_color-2__3f6Tx","color-3":"GridSquare_color-3__E6IfZ","color-4":"GridSquare_color-4__1mIqN","color-5":"GridSquare_color-5__2eI04","color-6":"GridSquare_color-6__3aZJ3"}},,function(t,e,r){t.exports={instructions:"Instructions_instructions__1imUA"}},function(t,e,r){t.exports={"error-text":"ErrorMessage_error-text__1C2R-"}},,function(t,e,r){t.exports={msg:"NoDataMessage_msg__1EkxO"}},function(t,e,r){t.exports={title:"HeatmapTitle_title__1OAgH"}},function(t,e,r){t.exports={app:"App_app__1kX79"}},,,,,function(t,e,r){},,function(t,e,r){"use strict";r.r(e);var n=r(1),a=r.n(n),c=r(10),i=r.n(c),s=(r(21),r(2)),o=r(4),d=r.n(o),u=r(0),l=function(){return Object(u.jsxs)("div",{className:d.a.navbar,children:[Object(u.jsx)("a",{className:d.a["navbar__logo-container"],href:"/reddit-scraper-app",children:Object(u.jsx)("div",{className:d.a.navbar__logo,children:"R"})}),Object(u.jsx)("div",{className:d.a.navbar__title,children:"Reddit Scraper App"})]})},b=r(11),j=r.n(b),h=function(){return Object(u.jsx)("div",{className:j.a.instructions,children:"Search for your favorite subreddit below to find the best times to post."})},_=function(t){var e=Object(n.useState)(""),r=Object(s.a)(e,2),a=r[0],c=r[1],i=Object(n.useState)(!1),o=Object(s.a)(i,2),d=o[0],u=o[1],l=t(a);return{value:a,isTouched:d,isValid:l,valueChangeHandler:function(t){c(t.target.value)},valueBlurHandler:function(){u(!0)},reset:function(){l&&(c(""),u(!1))}}},f=r(8),p=r.n(f),x=function(t){var e=t.className?"".concat(t.className," ").concat(p.a.btn):p.a.btn;return Object(u.jsx)("button",{className:e,onClick:t.onClick,disabled:t.disabled,children:t.btnText})},O=r(3),m=r.n(O),v=function(t){var e=_((function(t){return 0===t.length||t.trim().length>0})),r=e.value,n=e.isValid,a=e.isTouched,c=e.valueChangeHandler,i=e.valueBlurHandler,s=e.reset,o=!n&&a?Object(u.jsx)("div",{className:m.a["searchbar__input--error"],children:"Please enter a valid subreddit."}):null,d=!n&&a?"".concat(m.a["searchbar__input--box"]," ").concat(m.a.invalid):m.a["searchbar__input--box"];return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.onSubmit(r.toLowerCase().trim()),s()},children:[Object(u.jsx)("label",{className:m.a.searchbar__label,htmlFor:"subreddit",children:"www.reddit.com/r/"}),Object(u.jsxs)("div",{className:m.a.searchbar__input,children:[o,Object(u.jsx)("input",{className:d,type:"text",id:"subreddit",name:"subreddit",placeholder:"askreddit",value:r,onChange:c,onBlur:i})]}),Object(u.jsx)(x,{className:m.a.searchbar__btn,btnText:"Submit",type:"submit",disabled:!n})]})},g=function(t){return Object(u.jsx)("div",{title:"loading-spinner",children:Object(u.jsxs)("svg",{width:t.width,height:t.height,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg","aria-label":t.label,children:[Object(u.jsx)("defs",{children:Object(u.jsxs)("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a",children:[Object(u.jsx)("stop",{stopColor:t.color,stopOpacity:"0",offset:"0%"}),Object(u.jsx)("stop",{stopColor:t.color,stopOpacity:".631",offset:"63.146%"}),Object(u.jsx)("stop",{stopColor:t.color,offset:"100%"})]})}),Object(u.jsx)("g",{fill:"none",fillRule:"evenodd",children:Object(u.jsxs)("g",{transform:"translate(1 1)",children:[Object(u.jsx)("path",{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:t.color,strokeWidth:"2",children:Object(u.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})}),Object(u.jsx)("circle",{fill:"#fff",cx:"36",cy:"18",r:t.radius,children:Object(u.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})})]})})]})})};g.defaultProps={height:80,width:80,color:"green",radius:1,label:"audio-loading"};var S=r(12),y=r.n(S),w=function(t){return Object(u.jsx)("div",{className:y.a["error-text"],children:t.msg})},N=r(13),P=function(){var t=window;return{width:t.innerWidth,height:t.innerHeight}},T=function(){var t=Object(n.useState)(P()),e=Object(s.a)(t,2),r=e[0],a=e[1];return Object(n.useEffect)((function(){function t(){a(P())}return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[]),r},E=r(9),C=r.n(E),L=function(t){var e=function(){if(0===t.maxDailyPosts)return"color-1";var e=t.numPosts/1;return e=(e=e/t.maxDailyPosts*6)<1&&e>0?1:e,e=Math.round(e),"color-".concat(e)}();return Object(u.jsx)("td",{className:"".concat(C.a["grid-square"]," ").concat(C.a[e]),children:0===t.numPosts?"-":t.numPosts})},D=function(t){var e=t.dayHour,r=t.maxDailyPosts,n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return Object(u.jsx)("div",{children:Object(u.jsxs)("table",{className:"heatmap",cellSpacing:"0",cellPadding:"0",border:"0",children:[Object(u.jsx)("thead",{children:Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{}),e[0].map((function(t,e){return Object(u.jsxs)("th",{children:[Object(u.jsx)("div",{children:e%12===0?12:e%12}),Object(u.jsx)("div",{children:e<12?"AM":"PM"})]},e)}))]})}),Object(u.jsx)("tbody",{children:e.map((function(t,e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{style:{textAlign:"right"},children:n[e]}),t.map((function(t,e){return Object(u.jsx)(L,{numPosts:t,maxDailyPosts:r},e)}))]},e)}))})]})})},I=function(t){var e=t.dayHour,r=t.screenWidth,n=t.maxDailyPosts,a=function(t){for(var e=new Array(24),r=0;r<e.length;r++)e[r]=new Array(7).fill(0);for(var n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++)e[n][a]=t[a][n];return e}(e);return Object(u.jsx)("div",{children:Object(u.jsxs)("table",{className:"heatmap",cellSpacing:"0",cellPadding:"0",border:"0",children:[Object(u.jsx)("thead",{children:r>=480?Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{}),Object(u.jsx)("th",{children:"Sun"}),Object(u.jsx)("th",{children:"Mon"}),Object(u.jsx)("th",{children:"Tue"}),Object(u.jsx)("th",{children:"Wed"}),Object(u.jsx)("th",{children:"Thr"}),Object(u.jsx)("th",{children:"Fri"}),Object(u.jsx)("th",{children:"Sat"})]}):Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{}),Object(u.jsx)("th",{children:"S"}),Object(u.jsx)("th",{children:"M"}),Object(u.jsx)("th",{children:"T"}),Object(u.jsx)("th",{children:"W"}),Object(u.jsx)("th",{children:"T"}),Object(u.jsx)("th",{children:"F"}),Object(u.jsx)("th",{children:"S"})]})}),Object(u.jsx)("tbody",{children:a.map((function(t,e){return Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:[e%12===0?12:e%12," ",e<12?"AM":"PM"]}),t.map((function(t,e){return Object(u.jsx)(L,{numPosts:t,maxDailyPosts:n},e)}))]},e)}))})]})})},F=r(14),H=r.n(F),B=function(){return Object(u.jsx)("div",{className:H.a.msg,children:"No Data..."})},q=function(t){var e=T(),r=e.height,a=e.width,c=function(){for(var e=[],r=0;r<7;r++)e.push(new Array(24).fill(0));var n,a=Object(N.a)(t.data);try{for(a.s();!(n=a.n()).done;){var c=n.value;0===c.day?e[0][parseInt(c.hour,10)]++:1===c.day?e[1][parseInt(c.hour,10)]++:2===c.day?e[2][parseInt(c.hour,10)]++:3===c.day?e[3][parseInt(c.hour,10)]++:4===c.day?e[4][parseInt(c.hour,10)]++:5===c.day?e[5][parseInt(c.hour,10)]++:6===c.day&&e[6][parseInt(c.hour,10)]++}}catch(i){a.e(i)}finally{a.f()}return e}(),i=c.flat().reduce((function(t,e){return Math.max(t,e)}),0);return Object(n.useEffect)((function(){return t.data&&0!==t.data.length?a>r?Object(u.jsx)(D,{dayHour:c,max:i}):Object(u.jsx)(I,{dayHour:c,screenWidth:a,maxDailyPosts:i}):Object(u.jsx)(B,{})}),[r,a,c,t.data,i]),t.data&&0!==t.data.length?a>r?Object(u.jsx)(D,{dayHour:c,maxDailyPosts:i}):Object(u.jsx)(I,{dayHour:c,screenWidth:a,maxDailyPosts:i}):Object(u.jsx)(B,{})},M=r(15),A=r.n(M),k=function(t){return Object(u.jsxs)("div",{className:A.a.title,children:["Top rated Reddit posts for: www.reddit.com/r/",t.subreddit]})},G=function(t){var e=Object(n.useState)(null),r=Object(s.a)(e,2),c=r[0],i=r[1],o=Object(n.useState)(!1),d=Object(s.a)(o,2),l=d[0],b=d[1],j=Object(n.useState)(null),h=Object(s.a)(j,2),_=h[0],f=h[1],p=function(t,e,r){return t.toLocaleString(e,{timeZone:r}).split(", ")[0]},x=function(t,e,r){return t.toLocaleString(e,{timeZone:r}).split(", ")[1]},O=function(t,e,r){return t.toLocaleString(e,{timeZone:r,hour12:!1}).split(", ")[1].split(":")[0]%24};return Object(n.useEffect)((function(){t.subreddit&&0!==t.subreddit.length&&(f(null),b(!0),fetch("https://www.reddit.com/r/".concat(t.subreddit,"/top.json?t=month&limit=100")).then((function(t){return t.json()})).then((function(e){if(function(t){return!(!t.data.children||0===t.data.children.length)&&t.data.children.map((function(t){return t.data.over_18})).every((function(t){return!0===t}))}(e))return b(!1),void f("Explicit content not allowed. Please try a different subreddit.");var r={clientTimeZone:Intl.DateTimeFormat().resolvedOptions().timeZone,clientLocale:Intl.DateTimeFormat().resolvedOptions().locale},n=r.clientTimeZone,a=r.clientLocale,c=e.data.children.map((function(e){var r=new Date(1e3*e.data.created_utc);return{subreddit:t.subreddit,upvote_ratio:e.data.upvote_ratio,unix_time:r,day:r.getDay(),date:p(r,a,n),time:x(r,a,n),hour:O(r,a,n)}}));b(!1),i(c||null)})).catch((function(e){b(!1),f('Error: No data available for subreddit: "'.concat(t.subreddit,'"'))})))}),[t.subreddit]),Object(n.useEffect)((function(){c&&c.length>0&&fetch("https://reddit-scraper-app-default-rtdb.firebaseio.com/subreddits.json",{method:"POST",body:JSON.stringify({subreddit:c[0].subreddit.toLowerCase(),count:1}),headers:{"Content-Type":"application/json"}})}),[c]),t.subreddit,l?Object(u.jsx)(g,{color:"#6200ee"}):_?Object(u.jsx)(w,{msg:_}):c?Object(u.jsxs)(a.a.Fragment,{children:[Object(u.jsx)(k,{subreddit:t.subreddit}),Object(u.jsx)(q,{data:c})]}):Object(u.jsx)(w,{msg:_})},Z=function(t){var e=Object(n.useState)(""),r=Object(s.a)(e,2),c=r[0],i=r[1];return Object(n.useEffect)((function(){i(t.subreddit)}),[t.subreddit]),Object(u.jsxs)(a.a.Fragment,{children:[Object(u.jsx)(v,{onSubmit:function(e){i(e),t.onEnteredSubreddit(e)}}),c&&Object(u.jsx)(G,{subreddit:c})]})},W=r(5),R=r.n(W),J=function(t){var e=function(e){var r=e.target.firstChild.data;t.onEnteredSubreddit(r)};return Object(u.jsxs)("div",{className:R.a["popular-search-list"],children:[Object(u.jsx)("div",{className:R.a["popular-search-list__heading"],children:"Popular Searches"}),t.data&&0!==t.data.length?t.data.map((function(t){return Object(u.jsx)("div",{className:R.a["popular-search-list__subreddit"],children:Object(u.jsx)("span",{onClick:e,children:t.subreddit})},t.subreddit)})):Object(u.jsx)("p",{className:R.a["popular-search-list__no-data"],children:"no data..."})]})},U=function(t){var e=Object(n.useState)(null),r=Object(s.a)(e,2),a=r[0],c=r[1],i=Object(n.useState)(!1),o=Object(s.a)(i,2),d=o[0],l=o[1],b=Object(n.useState)(null),j=Object(s.a)(b,2),h=j[0],_=j[1];return Object(n.useEffect)((function(){l(!0),fetch("https://reddit-scraper-app-default-rtdb.firebaseio.com/subreddits.json").then((function(t){return t.json()})).then((function(t){if(t){var e=function(t){for(var e={},r=0,n=Object.entries(t);r<n.length;r++){var a=n[r],c=a[1].subreddit,i=a[1].count;e[c]?e[c]++:e[c]=i}return e}(t),r=function(t){return Object.entries(t).map((function(t){return{subreddit:t[0],count:t[1]}}))}(e);r.sort((function(t,e){return e.count-t.count})),r.splice(5,r.length),l(!1),c(r)}else l(!1)})).catch((function(t){return _("Something went wrong...")}))}),[]),d?Object(u.jsx)(g,{color:"#6200ee"}):h?Object(u.jsx)(w,{msg:h}):Object(u.jsx)(J,{data:a,onEnteredSubreddit:t.onEnteredSubreddit})},z=r(16),Q=r.n(z),V=function(){var t=Object(n.useState)(null),e=Object(s.a)(t,2),r=e[0],a=e[1],c=function(t){a(t)};return Object(u.jsxs)("div",{className:Q.a.app,children:[Object(u.jsx)(l,{}),Object(u.jsx)(h,{}),Object(u.jsx)(Z,{subreddit:r,onEnteredSubreddit:c}),Object(u.jsx)(U,{subreddit:r,onEnteredSubreddit:c})]})},K=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,24)).then((function(e){var r=e.getCLS,n=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;r(t),n(t),a(t),c(t),i(t)}))};i.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(V,{})}),document.getElementById("root")),K()}],[[23,1,2]]]);
//# sourceMappingURL=main.b057f43d.chunk.js.map